{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "country-dropdown",
  "type": "registry:component",
  "title": "Country Dropdown",
  "description": "A dropdown component for selecting countries with flags.",
  "dependencies": [
    "country-data-list",
    "react-circle-flags",
    "lucide-react",
    "@radix-ui/react-popover",
    "cmdk"
  ],
  "registryDependencies": [
    "button"
  ],
  "files": [
    {
      "path": "registry/lagos/ui/country-dropdown.tsx",
      "content": "\"use client\";\nimport React, { useCallback, useState, forwardRef, useEffect } from \"react\";\n\n// shadcn\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\n// utils\nimport { cn } from \"@/lib/utils\";\n\n// assets\nimport { ChevronDown, CheckIcon, Globe } from \"lucide-react\";\nimport { CircleFlag } from \"react-circle-flags\";\n\n// data\nimport { countries } from \"country-data-list\";\n\n// Country interface\nexport interface Country {\n  alpha2: string;\n  alpha3: string;\n  countryCallingCodes: string[];\n  currencies: string[];\n  emoji?: string;\n  ioc: string;\n  languages: string[];\n  name: string;\n  status: string;\n}\n\n// Dropdown props\ninterface CountryDropdownProps {\n  options?: Country[];\n  onChange?: (country: Country) => void;\n  defaultValue?: string;\n  disabled?: boolean;\n  placeholder?: string;\n  slim?: boolean;\n}\n\nconst CountryDropdownComponent = (\n  {\n    options = countries.all.filter(\n      (country: Country) =>\n        country.emoji && country.status !== \"deleted\" && country.ioc !== \"PRK\",\n    ),\n    onChange,\n    defaultValue,\n    disabled = false,\n    placeholder = \"Select a country\",\n    slim = false,\n    ...props\n  }: CountryDropdownProps,\n  ref: React.ForwardedRef<HTMLButtonElement>,\n) => {\n  const [open, setOpen] = useState(false);\n  const [selectedCountry, setSelectedCountry] = useState<Country | undefined>(\n    undefined,\n  );\n\n  useEffect(() => {\n    if (defaultValue) {\n      const initialCountry = options.find(\n        (country) => country.alpha2 === defaultValue,\n      );\n      if (initialCountry) {\n        setSelectedCountry(initialCountry);\n      } else {\n        // Reset selected country if defaultValue is not found\n        setSelectedCountry(undefined);\n      }\n    } else {\n      // Reset selected country if defaultValue is undefined or null\n      setSelectedCountry(undefined);\n    }\n  }, [defaultValue, options]);\n\n  const handleSelect = useCallback(\n    (country: Country) => {\n      console.log(\"ðŸŒ CountryDropdown value: \", country);\n      setSelectedCountry(country);\n      onChange?.(country);\n      setOpen(false);\n    },\n    [onChange],\n  );\n\n  const triggerClasses = cn(\n    \"flex min-h-9 w-full items-center justify-between whitespace-nowrap rounded-xl border border-input bg-transparent px-4 py-3 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n    slim === true && \"w-20\",\n  );\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger\n        ref={ref}\n        className={triggerClasses}\n        disabled={disabled}\n        {...props}\n      >\n        {selectedCountry ? (\n          <div className=\"flex w-0 flex-grow items-center gap-2 overflow-hidden\">\n            <div className=\"inline-flex h-5 w-5 shrink-0 items-center justify-center overflow-hidden rounded-full\">\n              <CircleFlag\n                countryCode={selectedCountry.alpha2.toLowerCase()}\n                height={20}\n              />\n            </div>\n            {slim === false && (\n              <span className=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n                {selectedCountry.name}\n              </span>\n            )}\n          </div>\n        ) : (\n          <span>\n            {slim === false ? (\n              placeholder || setSelectedCountry.name\n            ) : (\n              <Globe size={20} />\n            )}\n          </span>\n        )}\n        <ChevronDown size={16} />\n      </PopoverTrigger>\n      <PopoverContent\n        collisionPadding={10}\n        side=\"bottom\"\n        className=\"min-w-[--radix-popper-anchor-width] p-0\"\n      >\n        <Command className=\"max-h-[200px] w-full sm:max-h-[270px]\">\n          <CommandList>\n            <div className=\"sticky top-0 z-10 bg-popover\">\n              <CommandInput placeholder=\"Search country...\" />\n            </div>\n            <CommandEmpty>No country found.</CommandEmpty>\n            <CommandGroup>\n              {options\n                .filter((x) => x.name)\n                .map((option, key: number) => (\n                  <CommandItem\n                    className=\"flex w-full items-center gap-2\"\n                    key={key}\n                    onSelect={() => handleSelect(option)}\n                  >\n                    <div className=\"flex w-0 flex-grow space-x-2 overflow-hidden\">\n                      <div className=\"inline-flex h-5 w-5 shrink-0 items-center justify-center overflow-hidden rounded-full\">\n                        <CircleFlag\n                          countryCode={option.alpha2.toLowerCase()}\n                          height={20}\n                        />\n                      </div>\n                      <span className=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n                        {option.name}\n                      </span>\n                    </div>\n                    <CheckIcon\n                      className={cn(\n                        \"ml-auto h-4 w-4 shrink-0\",\n                        option.name === selectedCountry?.name\n                          ? \"opacity-100\"\n                          : \"opacity-0\",\n                      )}\n                    />\n                  </CommandItem>\n                ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nCountryDropdownComponent.displayName = \"CountryDropdownComponent\";\n\nexport const CountryDropdown = forwardRef(CountryDropdownComponent);\n",
      "type": "registry:component",
      "target": "components/ui/aevr/country-dropdown.tsx"
    }
  ]
}