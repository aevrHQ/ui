{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "currency-select",
  "type": "registry:component",
  "title": "Currency Select",
  "description": "A minimal currency selection component.",
  "dependencies": [
    "iso-country-currency",
    "lucide-react",
    "@radix-ui/react-popover",
    "cmdk"
  ],
  "registryDependencies": [
    "command",
    "popover"
  ],
  "files": [
    {
      "path": "registry/lagos/ui/currency-select.tsx",
      "content": "\"use client\";\nimport React, { useCallback, useState, forwardRef, useEffect } from \"react\";\nimport { getAllISOCodes } from \"iso-country-currency\";\n\n// shadcn\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/components/ui/command\";\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/components/ui/popover\";\n\n// utils\nimport { cn } from \"@/lib/utils\";\n\n// assets\nimport { ChevronDown, CheckIcon, Coins } from \"lucide-react\";\n\n// Currency interface\nexport interface CurrencyOption {\n  currency: string;\n  symbol: string;\n  countryName?: string; // Optional context if we want to show it\n}\n\n// Dropdown props\ninterface CurrencyDropdownProps {\n  onChange?: (currency: string) => void;\n  defaultValue?: string;\n  disabled?: boolean;\n  placeholder?: string;\n  className?: string;\n  value?: string;\n}\n\nconst MinimalCurrencySelectComponent = (\n  {\n    onChange,\n    defaultValue,\n    value,\n    disabled = false,\n    placeholder = \"Select currency\",\n    className,\n    ...props\n  }: CurrencyDropdownProps,\n  ref: React.ForwardedRef<HTMLButtonElement>,\n) => {\n  const [open, setOpen] = useState(false);\n  const [selectedCurrency, setSelectedCurrency] = useState<\n    CurrencyOption | undefined\n  >(undefined);\n\n  // Process ISO codes to get unique currencies\n  const allCurrencies = React.useMemo(() => {\n    const codes = getAllISOCodes();\n    const uniqueCurrencies = new Map<string, CurrencyOption>();\n\n    codes.forEach((item) => {\n      // We prefer keeping the first occurrence or maybe just the code and symbol\n      if (!uniqueCurrencies.has(item.currency)) {\n        uniqueCurrencies.set(item.currency, {\n          currency: item.currency,\n          symbol: item.symbol,\n        });\n      }\n    });\n\n    return Array.from(uniqueCurrencies.values()).sort((a, b) =>\n      a.currency.localeCompare(b.currency),\n    );\n  }, []);\n\n  useEffect(() => {\n    const val = value || defaultValue;\n    if (val) {\n      const found = allCurrencies.find((c) => c.currency === val);\n      if (found) {\n        setSelectedCurrency(found);\n      }\n    } else {\n      setSelectedCurrency(undefined);\n    }\n  }, [value, defaultValue, allCurrencies]);\n\n  const handleSelect = useCallback(\n    (option: CurrencyOption) => {\n      setSelectedCurrency(option);\n      onChange?.(option.currency);\n      setOpen(false);\n    },\n    [onChange],\n  );\n\n  const triggerClasses = cn(\n    \"flex min-h-9 w-full items-center justify-between whitespace-nowrap rounded-xl border border-input bg-transparent px-4 py-3 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n    className,\n  );\n\n  return (\n    <Popover open={open} onOpenChange={setOpen}>\n      <PopoverTrigger\n        ref={ref}\n        className={triggerClasses}\n        disabled={disabled}\n        type=\"button\" // Prevent form submission\n        {...props}\n      >\n        {selectedCurrency ? (\n          <div className=\"flex w-0 flex-grow items-center gap-2 overflow-hidden\">\n            <div className=\"inline-flex h-6 w-8 shrink-0 items-center justify-center overflow-hidden rounded-full bg-slate-100 text-xs font-bold text-slate-600 dark:bg-slate-800 dark:text-slate-300\">\n              {selectedCurrency.symbol}\n            </div>\n            <span className=\"overflow-hidden text-ellipsis whitespace-nowrap\">\n              {selectedCurrency.currency}\n            </span>\n          </div>\n        ) : (\n          <span className=\"flex items-center gap-2 text-muted-foreground\">\n            <Coins size={16} />\n            {placeholder}\n          </span>\n        )}\n        <ChevronDown size={16} className=\"ml-2 shrink-0 opacity-50\" />\n      </PopoverTrigger>\n      <PopoverContent\n        collisionPadding={10}\n        side=\"bottom\"\n        className=\"min-w-[--radix-popper-anchor-width] p-0\"\n      >\n        <Command className=\"max-h-[200px] w-full sm:max-h-[270px]\">\n          <CommandList>\n            <div className=\"sticky top-0 z-10 bg-popover\">\n              <CommandInput placeholder=\"Search currency...\" />\n            </div>\n            <CommandEmpty>No currency found.</CommandEmpty>\n            <CommandGroup>\n              {allCurrencies.map((option) => (\n                <CommandItem\n                  className=\"flex w-full items-center gap-2\"\n                  key={option.currency}\n                  onSelect={() => handleSelect(option)}\n                  value={option.currency} // Helper for fuzzy search\n                >\n                  <div className=\"flex w-0 flex-grow items-center space-x-2 overflow-hidden\">\n                    <div className=\"inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-sm bg-slate-100 text-xs font-semibold dark:bg-slate-800\">\n                      {option.symbol}\n                    </div>\n                    <span className=\"overflow-hidden text-ellipsis whitespace-nowrap font-medium\">\n                      {option.currency}\n                    </span>\n                  </div>\n                  <CheckIcon\n                    className={cn(\n                      \"ml-auto h-4 w-4 shrink-0\",\n                      option.currency === selectedCurrency?.currency\n                        ? \"opacity-100\"\n                        : \"opacity-0\",\n                    )}\n                  />\n                </CommandItem>\n              ))}\n            </CommandGroup>\n          </CommandList>\n        </Command>\n      </PopoverContent>\n    </Popover>\n  );\n};\n\nMinimalCurrencySelectComponent.displayName = \"MinimalCurrencySelectComponent\";\n\nexport const MinimalCurrencySelect = forwardRef(MinimalCurrencySelectComponent);\n",
      "type": "registry:component",
      "target": "components/ui/aevr/currency-select.tsx"
    }
  ]
}